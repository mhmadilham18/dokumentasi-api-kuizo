<h1>Question & Topic Service</h1>
<p>
  Endpoint-endpoint ini digunakan oleh <strong>Guru</strong> atau
  <strong>Admin</strong> untuk mengelola bank soal dan topik/mata pelajaran.
</p>

<h2>Topics</h2>
<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/topics</span>
  </div>
  <div class="endpoint-body">
    <h3>Daftar Topik</h3>
    <p>Mengambil daftar semua topik soal/mata pelajaran.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Query Parameters</h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>q</code></td>
          <td>string</td>
          <td>Teks pencarian untuk nama topik. Opsional.</td>
        </tr>
        <tr>
          <td><code>page</code></td>
          <td>integer</td>
          <td>Nomor halaman. Default: 1. Opsional.</td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": [
        { "id": 1, "name": "Matematika Dasar" },
        { "id": 2, "name": "Fisika Mekanika" }
    ],
    "meta": { "total": 25, "page": 1 }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-post">POST</span>
    <span class="endpoint-path">/topics</span>
  </div>
  <div class="endpoint-body">
    <h3>Buat Topik Baru</h3>
    <p>Menambahkan topik baru.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Request Body <code>application/json</code></h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>name</code></td>
          <td>string</td>
          <td>
            Nama topik baru. <span class="required">Wajib, min 3.</span>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>201 Created</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Topik berhasil dibuat",
    "data": { "id": 3, "name": "Biologi Sel" }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-delete">DELETE</span>
    <span class="endpoint-path">/topics/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Hapus Topik</h3>
    <p>Menghapus data topik secara permanen berdasarkan ID.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Topik berhasil dihapus."
}</code></pre>
  </div>
</div>

<h2>Questions</h2>
<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/questions</span>
  </div>
  <div class="endpoint-body">
    <h3>Daftar Soal</h3>
    <p>
      Mengambil daftar soal dengan dukungan pagination, pencarian, dan filter.
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Query Parameters</h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>q</code></td>
          <td>string</td>
          <td>Teks pencarian untuk isi soal. Opsional.</td>
        </tr>
        <tr>
          <td><code>topic_id</code></td>
          <td>integer</td>
          <td>Filter berdasarkan ID topik. Opsional.</td>
        </tr>
        <tr>
          <td><code>difficulty_level</code></td>
          <td>integer</td>
          <td>
            Filter berdasarkan tingkat kesulitan (1=mudah, 2=sedang, 3=sulit).
            Opsional.
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>string</td>
          <td>
            Filter versi soal. Pilihan: <code>original</code>,
            <code>augmentasi</code>. Opsional.
          </td>
        </tr>
        <tr>
          <td><code>page</code></td>
          <td>integer</td>
          <td>Nomor halaman. Default: 1. Opsional.</td>
        </tr>
        <tr>
          <td><code>limit</code></td>
          <td>integer</td>
          <td>Jumlah item per halaman. Default: 20. Opsional.</td>
        </tr>
        <tr>
          <td><code>sort</code></td>
          <td>string</td>
          <td>
            Urutan. Contoh: <code>created_at.desc</code>. Opsional.
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": [
        {
            "id": 101,
            "question_text": "Siapakah penemu bola lampu?",
            "topic_id": 2,
            "difficulty_level": 1,
            "created_at": "2025-10-10T10:00:00.000Z"
        }
    ],
    "meta": { "page": 1, "limit": 20, "total": 150 }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-post">POST</span>
    <span class="endpoint-path">/questions</span>
  </div>
  <div class="endpoint-body">
    <h3>Tambah Soal Baru</h3>
    <p>
      Menambahkan soal baru ke dalam bank soal. Jika <code>topic_name</code>
      diberikan dan belum ada, topik baru akan dibuat secara otomatis.
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Request Body <code>multipart/form-data</code></h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>question_text</code></td>
          <td>string</td>
          <td>Teks pertanyaan. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>option_a</code></td>
          <td>string</td>
          <td>Teks pilihan jawaban A. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>option_b</code></td>
          <td>string</td>
          <td>Teks pilihan jawaban B. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>option_c</code></td>
          <td>string</td>
          <td>Teks pilihan jawaban C. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>option_d</code></td>
          <td>string</td>
          <td>Teks pilihan jawaban D. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>option_e</code></td>
          <td>string</td>
          <td>Teks pilihan jawaban E. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>correct_answer</code></td>
          <td>string</td>
          <td>
            Jawaban yang benar. Pilihan: "A", "B", "C", "D", "E".
            <span class="required">Wajib.</span>
          </td>
        </tr>
        <tr>
          <td><code>topic_id</code></td>
          <td>integer</td>
          <td>
            ID topik yang sudah ada. Opsional, salah satu dari
            <code>topic_id</code> atau <code>topic_name</code> harus ada.
          </td>
        </tr>
        <tr>
          <td><code>topic_name</code></td>
          <td>string</td>
          <td>Nama topik baru yang akan dibuat. Opsional.</td>
        </tr>
        <tr>
          <td><code>image_file</code></td>
          <td>file</td>
          <td>File gambar pendukung soal. Opsional.</td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>string</td>
          <td>
            Versi soal. Pilihan: 'original', 'augmentasi'. Default: 'original'.
            Opsional.
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>201 Created</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Soal berhasil ditambahkan.",
    "data": {
        "id": 102,
        "topic_id": 3,
        "question_text": "Apa rumus kimia dari air?",
        "image_url": "https://url.supabase.co/storage/v1/object/public/questions/image.jpg",
        "option_a": "H2O",
        "option_b": "CO2",
        "option_c": "O2",
        "option_d": "N2",
        "option_e": "CH4",
        "correct_answer": "A",
        "difficulty_level": 1,
        "created_at": "2025-10-14T15:00:00.000Z"
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/questions/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Detail Soal</h3>
    <p>
      Mengambil detail lengkap satu soal berdasarkan ID-nya. Dapat diakses oleh
      semua role.
    </p>
    <div class="auth-badge">
      Authorization:
      <span class="auth-required">Bearer Token (Siswa/Guru/Admin)</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": {
        "id": 102,
        "topic_id": 3,
        "question_text": "Apa rumus kimia dari air?",
        "image_url": "https://url.supabase.co/storage/v1/object/public/questions/image.jpg",
        "option_a": "H2O",
        "option_b": "CO2",
        "option_c": "O2",
        "option_d": "N2",
        "option_e": "CH4",
        "correct_answer": "A",
        "difficulty_level": 1,
        "created_at": "2025-10-14T15:00:00.000Z"
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-put">PUT</span>
    <span class="endpoint-path">/questions/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Perbarui Soal</h3>
    <p>
      Memperbarui data soal berdasarkan ID. Semua field bersifat opsional (kirim
      hanya yang ingin diubah).
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Request Body <code>multipart/form-data</code></h3>
    <p>
      Sama seperti request body untuk <code>POST /questions</code>, tetapi semua
      field bersifat opsional.
    </p>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Soal berhasil diperbarui.",
    "data": {
        "id": 102,
        "question_text": "Apa rumus molekul dari air?",
        "difficulty_level": 2
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-delete">DELETE</span>
    <span class="endpoint-path">/questions/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Hapus Soal</h3>
    <p>Menghapus soal secara permanen dari bank soal berdasarkan ID.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token (Guru/Admin)</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Soal berhasil dihapus."
}</code></pre>
  </div>
</div>